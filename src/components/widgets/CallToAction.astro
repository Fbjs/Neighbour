---
import WidgetWrapper from '../ui/WidgetWrapper.astro';
import type { CallToAction, Widget } from '~/types';
import Headline from '~/components/ui/Headline.astro';
import Button from '~/components/ui/Button.astro';

interface Props extends Widget {
  title?: string;
  subtitle?: string;
  tagline?: string;
  callToAction?: CallToAction;
  actions?: string | CallToAction[];
}

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  actions = await Astro.slots.render('actions'),

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  
  <div
    class="max-w-3xl mx-auto text-center p-6 rounded-md shadow-xl dark:shadow-none dark:border dark:border-slate-600 bg-blue-50 dark:bg-dark dark:bg-opacity-70 hl-tag"
  >
    <Headline
      tagline={tagline}
      classes={{
        container: 'mb-0 md:mb-0',
      }}
    />

    <Headline
      title={title}
      classes={{
        title: 'text-5xl md:text-4xl font-bold tracking-tighter mb-4 font-heading hl-title',
      }}
    />

    <Headline
    subtitle={subtitle}
    classes={{
      subtitle: 'text-xl text-muted dark:text-slate-100 hl-subtitle',
    }}
  />
  <div class="flex" >
    <slot name="imagen"></slot>

    {
      actions && (
        <div class="max-w-lg sm:max-w-2xl m-auto flex flex-col sm:flex-row sm:justify-center gap-4 mt-6 hl-btn">
          {Array.isArray(actions) ? (
            actions.map((action) => (
              <div class=" w-full sm:w-auto">
                {action.variant == 'whatsapp' ? (
                 <a
  href="https://wa.me/56963238857"
  target="_blank"
  rel="noopener noreferrer"
  class="inline-flex items-center gap-2 px-4 py-2 rounded-full font-medium shadow-md hover:shadow-lg transition-shadow duration-150
         bg-gradient-to-r from-cyan-400 to-green-500 text-white"
>
  <!-- Icono WhatsApp (SVG) -->
  <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
    <path d="M20.52 3.48A11.94 11.94 0 0 0 12.06.25 11.94 11.94 0 0 0 3.6 3.48a12.05 12.05 0 0 0-3 8.1c0 2.12.55 4.18 1.6 6.03L1 23l5.5-1.44a11.96 11.96 0 0 0 5.56 1.18h.01c3.03 0 5.87-1.18 8.01-3.32a11.95 11.95 0 0 0 3.32-8.01 11.99 11.99 0 0 0-3.32-8.02zM12.06 21.5h-.01a9.47 9.47 0 0 1-4.82-1.37l-.34-.2-3.28.86.88-3.2-.22-.33A9.47 9.47 0 1 1 21.5 12.06c0 2.53-.99 4.9-2.78 6.68a9.43 9.43 0 0 1-6.66 2.76zM17.1 14.7c-.3-.15-1.77-.87-2.05-.97-.28-.1-.48-.15-.68.15-.2.3-.78.97-.95 1.17-.17.2-.34.22-.63.07-.3-.15-1.27-.47-2.42-1.49-.9-.8-1.5-1.79-1.67-2.09-.17-.3-.02-.46.13-.61.13-.13.3-.34.45-.51.15-.17.2-.3.3-.5.1-.2 0-.37-.05-.52-.05-.15-.68-1.64-.93-2.26-.24-.58-.48-.5-.66-.51-.17-.01-.37-.01-.57-.01s-.52.07-.79.37c-.27.31-1.02.99-1.02 2.41s1.04 2.8 1.18 2.99c.15.2 2.04 3.1 4.95 4.35 2.06.9 2.87.98 3.9.82.63-.1 1.77-.72 2.02-1.42.25-.7.25-1.3.18-1.42-.07-.12-.27-.2-.57-.35z"/>
  </svg>

  Solicita tu DEMO
</a>
               
                ):(
                  <slot name="boton"></slot>
                )}
              </div>
            ))
          ) : (
            <Fragment set:html={actions} />
          )}
        </div>
      )
    }

  </div>
  </div>
</WidgetWrapper>
